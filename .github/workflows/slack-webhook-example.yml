# Alternative: Simple Slack Webhook Notification
# This is easier to set up but less feature-rich

- name: Notify Slack (Webhook)
  if: always()
  run: |
    # Create the message
    MESSAGE="ğŸš€ *Helixium Deployment ${{ steps.summary.outputs.deployment-status == 'success' && 'âœ… Successful' || 'âŒ Failed' }}*

    *Repository:* ${{ github.repository }}
    *Branch:* ${{ github.ref_name }}
    *Triggered by:* ${{ github.actor }}

    *Job Results:*
    â€¢ Setup: ${{ needs.setup.result == 'success' && 'âœ…' || 'âŒ' }}
    â€¢ Build: ${{ needs.build-images.result == 'success' && 'âœ…' || 'âŒ' }}
    â€¢ Deploy: ${{ needs.deploy-ecs.result == 'success' && 'âœ…' || 'âŒ' }}
    â€¢ Verify: ${{ needs.verify-deployment.result == 'success' && 'âœ…' || 'âŒ' }}

    ${{ steps.summary.outputs.deployment-url != 'Not available' && format('*Application URL:* {0}', steps.summary.outputs.deployment-url) || '' }}

    <${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Workflow>"

    # Send to Slack
    curl -X POST -H 'Content-type: application/json' \
      --data "{\"text\":\"$MESSAGE\"}" \
      ${{ secrets.SLACK_WEBHOOK_URL }}
